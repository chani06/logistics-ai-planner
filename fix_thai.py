# -*- coding: utf-8 -*-
"""
แก้ไขปัญหา encoding โดยแปลงจาก mojibake กลับเป็นภาษาไทย
"""

import re

# อ่านไฟล์ที่มีปัญหา
with open('app_backup_original.py', 'r', encoding='utf-8', errors='ignore') as f:
    content = f.read()

# Dictionary สำหรับแปลง mojibake กลับเป็นภาษาไทย
# สร้างจาก pattern ที่พบบ่อย
replacements = {
    'α╕éα╕╡α╕öα╕êα╕│α╕üα╕▒α╕öα╕úα╕ûα╣üα╕òα╣êα╕Ñα╕░α╕¢α╕úα╕░α╣Çα╕áα╕ù': 'ขีดจำกัดรถแต่ละประเภท',
    'α╕íα╕▓α╕òα╕úα╕Éα╕▓α╕Ö': 'มาตรฐาน',
    'α╣äα╕íα╣êα╣Çα╕üα╕┤α╕Ö': 'ไม่เกิน',
    'α╕êα╕╕α╕ö': 'จุด',
    'Γëñ': 'สูงสุด',
    'α╕éα╕╡α╕öα╕êα╕│α╕üα╕▒α╕öα╕¬α╕│α╕½α╕úα╕▒α╕Ü': 'ขีดจำกัดสำหรับ',
    'α╕Ñα╣ëα╕ºα╕Ö': 'ล้วน',
    'α╕½α╣ëα╕▓α╕íα╣Çα╕üα╕┤α╕Ö': 'ห้ามเกิน',
    'α╕¬α╕╣α╕çα╕¬α╕╕α╕ö': 'สูงสุด',
    'α╕¬α╕▓α╕éα╕▓': 'สาขา',
    'α╕òα╣êα╕¡α╕¢α╕úα╕░α╣Çα╕áα╕ùα╕úα╕û': 'ต้องมีมาตรฐาน',
    'α╕òα╣ëα╕¡α╕çα╣âα╕èα╣ëα╕¡α╕óα╣êα╕▓α╕çα╕Öα╣ëα╕¡α╕ó': 'ต้องไม่ต่ำกว่า',
    'α╕¬α╕│α╕½α╕úα╕▒α╕Üα╕üα╕▓α╕úα╣âα╕èα╣ëα╕úα╕û': 'สำหรับการโหลด',
    'α╕òα╕▓α╕í': 'ตาม',
    'α╕êα╕│α╕Öα╕ºα╕Öα╕¬α╕▓α╕éα╕▓α╕òα╣êα╕¡α╕ùα╕úα╕┤α╕¢': 'จำนวนสาขาต่อทริป',
    'α╣âα╕èα╣ëα╕üα╕▒α╕Ü': 'โดยเฉพาะ',
    'α╣Çα╕ùα╣êα╕▓α╕Öα╕▒α╣ëα╕Ö': 'เท่านั้น',
    'α╣äα╕íα╣êα╕êα╕│α╕üα╕▒α╕ö': 'ไม่จำกัด',
    'α╕Ñα╕öα╕êα╕▓α╕ü': 'ลดจาก',
    'α╣Çα╕¢α╣çα╕Ö': 'เป็น',
    'α╣Çα╕₧α╕╖α╣êα╕¡': 'เพื่อ',
    'α╕¢α╕úα╕░α╕íα╕ºα╕Ñα╕£α╕Ñα╣Çα╕úα╣çα╕ºα╕éα╕╢α╣ëα╕Ö': 'ประมวลผลเร็วขึ้น',
    'α╕êα╕│α╕üα╕▒α╕öα╕úα╕¡α╕Üα╕üα╕▓α╕úα╕úα╕ºα╕íα╕ùα╕úα╕┤α╕¢': 'จำนวนรอบการรวมทริป',
    'ΓÜá∩╕Å α╕òα╕┤α╕öα╕òα╕▒α╣ëα╕ç': '⚠️ ติดตั้ง',
}

# แทนที่ทั้งหมด
for old, new in replacements.items():
    content = content.replace(old, new)

# บันทึกไฟล์
with open('app.py', 'w', encoding='utf-8') as f:
    f.write(content)

print("✅ แก้ไขเสร็จแล้ว!")
print(f"   แทนที่: {len(replacements)} patterns")
