# ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏£‡∏ñ

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö
‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ó‡∏£‡∏¥‡∏õ:
- **‡∏£‡∏ñ 4W**: ‡πÉ‡∏ä‡πâ 4/10 ‡∏Ñ‡∏±‡∏ô (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 6 ‡∏Ñ‡∏±‡∏ô) - **‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ**
- **‡∏£‡∏ñ JB**: ‡πÉ‡∏ä‡πâ 37/15 ‡∏Ñ‡∏±‡∏ô (‡πÄ‡∏Å‡∏¥‡∏ô 22 ‡∏Ñ‡∏±‡∏ô) - **‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ**
- **‡∏£‡∏ñ 6W**: ‡πÉ‡∏ä‡πâ 19/20 ‡∏Ñ‡∏±‡∏ô (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1 ‡∏Ñ‡∏±‡∏ô) - **‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏ï‡πá‡∏°**

## ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏´‡∏•‡∏±‡∏Å
‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏£‡∏ñ‡πÅ‡∏ö‡∏ö First-Come-First-Serve ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏ó‡∏≥‡πÉ‡∏´‡πâ:
1. ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô (‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó) ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏¢‡πà‡∏á‡∏£‡∏ñ JB ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ
2. ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ (‡πÄ‡∏ä‡πà‡∏ô ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ JB/6W ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á ‡πÄ‡∏à‡∏≠‡∏£‡∏ñ JB ‡∏´‡∏°‡∏î
3. ‡∏£‡∏ñ 4W ‡∏Å‡∏±‡∏ö 6W ‡∏ñ‡∏π‡∏Å‡∏•‡∏∞‡πÄ‡∏ß‡πâ‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å JB ‡∏Å‡πà‡∏≠‡∏ô (‡∏Ñ‡πà‡∏≤ default)

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Priority Sorting)
‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏±‡∏î‡∏ó‡∏£‡∏¥‡∏õ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏ñ:

**‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Priority Score):**
1. **Priority 1000**: ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ 4W ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ 4W ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
   - ‡πÄ‡∏ä‡πà‡∏ô: ‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡∏ã‡∏≠‡∏¢‡πÅ‡∏Ñ‡∏ö, ‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î
   
2. **Priority 500**: ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ JB ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 4W ‡∏´‡∏£‡∏∑‡∏≠ JB)
   - ‡πÄ‡∏ä‡πà‡∏ô: ‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡∏†‡∏π‡πÄ‡∏Ç‡∏≤, ‡∏ó‡∏≤‡∏á‡∏•‡∏≤‡∏î‡∏ä‡∏±‡∏ô, ‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠/‡πÉ‡∏ï‡πâ
   
3. **Priority 0**: ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á 6W)
   - ‡πÄ‡∏ä‡πà‡∏ô: ‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á, ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ö

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏£‡∏ñ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö

```python
# 1. ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡∏≤‡∏° priority (‡∏™‡∏π‡∏á ‚Üí ‡∏ï‡πà‡∏≥)
df['_vehicle_constraint_priority'] = df['_max_vehicle'].map({
    '4W': 1000,
    'JB': 500,
    '6W': 0
})

# 2. ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≥‡∏ö‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° priority
subdistrict_groups = sorted(
    subdistrict_groups, 
    key=lambda x: (-x[1]['_vehicle_constraint_priority'].max(), ...)
)

# 3. ‡∏à‡∏±‡∏î‡∏ó‡∏£‡∏¥‡∏õ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö priority
# - ‡∏à‡∏±‡∏î‡∏™‡∏≤‡∏Ç‡∏≤ Priority 1000 ‡∏Å‡πà‡∏≠‡∏ô (‡πÉ‡∏ä‡πâ 4W)
# - ‡∏à‡∏±‡∏î‡∏™‡∏≤‡∏Ç‡∏≤ Priority 500 (‡πÉ‡∏ä‡πâ JB)
# - ‡∏à‡∏±‡∏î‡∏™‡∏≤‡∏Ç‡∏≤ Priority 0 ‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (4W, JB, 6W)
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ñ (Vehicle Cap)

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏±‡∏î‡∏ó‡∏£‡∏¥‡∏õ:

```python
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏ñ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
if used_vehicles[final_vehicle] >= available_vehicles.get(final_vehicle, 999):
    # ‡∏£‡∏ñ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏•‡∏≠‡∏á‡∏´‡∏≤‡∏£‡∏ñ‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏ó‡∏ô
    for upgrade_vehicle in ['4W', 'JB', '6W']:
        if used_vehicles[upgrade_vehicle] < available_vehicles[upgrade_vehicle]:
            # ‡∏°‡∏µ‡∏£‡∏ñ‡∏ß‡πà‡∏≤‡∏á ‚Üí ‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô
            final_vehicle = upgrade_vehicle
            break
    else:
        # ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏ñ‡πÄ‡∏•‡∏¢ ‚Üí ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ overflow
        overflow_branches.append(code)
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

```
üöõ ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ
==================================================
  4W:   4/ 10 ‡∏Ñ‡∏±‡∏ô (40.0%) üü¢ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 6 ‡∏Ñ‡∏±‡∏ô
  JB:  37/ 15 ‡∏Ñ‡∏±‡∏ô (246.7%) ‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏ô ‡πÄ‡∏Å‡∏¥‡∏ô 22 ‡∏Ñ‡∏±‡∏ô
  6W:  19/ 20 ‡∏Ñ‡∏±‡∏ô (95.0%) üü° ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏ï‡πá‡∏° ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1 ‡∏Ñ‡∏±‡∏ô
  ‡∏£‡∏ß‡∏°: 60 ‡∏Ñ‡∏±‡∏ô

  ‚ö†Ô∏è **‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô**: ‡∏£‡∏ñ‡πÄ‡∏Å‡∏¥‡∏ô - JB
  üí° **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á**: ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
```

## ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:
- **‡∏£‡∏ñ 4W**: ‡πÉ‡∏ä‡πâ 8-9/10 ‡∏Ñ‡∏±‡∏ô (‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏ï‡πá‡∏°)
- **‡∏£‡∏ñ JB**: ‡πÉ‡∏ä‡πâ 14-15/15 ‡∏Ñ‡∏±‡∏ô (‡πÉ‡∏ä‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏ï‡πá‡∏°)
- **‡∏£‡∏ñ 6W**: ‡πÉ‡∏ä‡πâ 18-20/20 ‡∏Ñ‡∏±‡∏ô (‡πÉ‡∏ä‡πâ‡πÄ‡∏ï‡πá‡∏°)

**‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏ñ‡πÄ‡∏Å‡∏¥‡∏ô** ‡πÅ‡∏•‡∏∞ **‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏±‡∏ô**

## ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ

1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `calculate_branch_priority()` 
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏ô Step 2 ‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `plan_trips_advanced()`
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏ñ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô Step 3
4. ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏ñ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
- ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
- ‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏à‡∏±‡∏î‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ
