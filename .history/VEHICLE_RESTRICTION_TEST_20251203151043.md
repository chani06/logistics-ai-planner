# ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏£‡∏ñ (Vehicle Restrictions)

## ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 3 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2025

### ‚úÖ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

#### 1. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `get_max_vehicle_for_branch(branch_code)`
- ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Booking History ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏™‡∏≤‡∏Ç‡∏≤ MH64 ‚Üí 4W)
- ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Punthai ‡πÑ‡∏î‡πâ (‡∏™‡∏≥‡∏£‡∏≠‡∏á)
- ‚úÖ Return 6W ‡πÄ‡∏õ‡πá‡∏ô default ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡∏°‡πà

#### 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `get_max_vehicle_for_trip(trip_codes)`
- ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡∏ó‡∏£‡∏¥‡∏õ
- ‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (restrictive) ‡πÄ‡∏õ‡πá‡∏ô max_allowed
- ‚úÖ ‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ MH64 (4W) + N669 (6W) ‚Üí ‡πÑ‡∏î‡πâ 4W

#### 3. ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≤‡∏Ç‡∏≤ (Line 1454-1467)
```python
# ‚úÖ Logic ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
code_max_vehicle = get_max_vehicle_for_branch(code)
current_trip_with_new = current_trip + [code]
trip_max_vehicle = get_max_vehicle_for_trip(set(current_trip_with_new))

vehicle_priority = {'4W': 1, 'JB': 2, '6W': 3}
current_priority = vehicle_priority.get(vehicle_type, 3)
new_priority = vehicle_priority.get(trip_max_vehicle, 3)

if new_priority < current_priority:
    continue  # ‚ùå ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≤‡∏Ç‡∏≤
```

**‡∏ú‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
- ‡∏ó‡∏£‡∏¥‡∏õ 6W (N669, GP00) + ‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡∏°‡πà MH64 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- new_priority (1) < current_priority (3)
- ‚úÖ **‡∏Ç‡πâ‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤ MH64 ‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ**

#### 4. Phase 2: ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ (Line 1950-1980)
```python
# ‚úÖ ‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î
if max_allowed == '4W':
    recommended = '4W'  # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ 4W
elif max_allowed in ['4W', 'JB']:
    recommended = 'JB'  # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ JB ‡πÅ‡∏°‡πâ‡πÄ‡∏Å‡∏¥‡∏ô 100%
else:
    # ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
```

**‡∏ú‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
- ‡∏ó‡∏£‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ MH64 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W) ‚Üí `max_allowed = '4W'`
- ‚úÖ **‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏£‡∏ñ 4W ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô 6W**

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### Case 1: ‡∏ó‡∏£‡∏¥‡∏õ 6W ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W
```
‡∏ó‡∏£‡∏¥‡∏õ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: [N669, GP00] ‚Üí ‡∏£‡∏ñ 6W
‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡∏°‡πà: MH64 ‚Üí ‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W

‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ:
1. trip_max_vehicle(['N669', 'GP00', 'MH64']) = '4W'
2. new_priority (1) < current_priority (3) ‚úÖ
3. ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‚ùå ‡∏Ç‡πâ‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤ MH64

‚úÖ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏£‡∏¥‡∏õ 6W
```

### Case 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W
```
‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà: [MH64, MI65, G031] ‚Üí ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W

Phase 2:
1. max_allowed = get_max_vehicle_for_trip() = '4W'
2. recommended = '4W' (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)

‚úÖ ‡∏ó‡∏£‡∏¥‡∏õ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡∏ñ 4W ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
```

### Case 3: ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î
```
‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏°‡πà: [N669, 11005383, NY39] ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

Phase 2:
1. max_allowed = '6W' (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î)
2. all_nearby = True (‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø)
3. cube_util_jb <= 120% ‚úÖ
4. recommended = 'JB' (‡∏•‡∏î 6W ‚Üí JB)

‚úÖ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÉ‡∏ä‡πâ JB ‡πÅ‡∏ó‡∏ô 6W
```

---

## üìä ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

### ‡∏ó‡∏£‡∏¥‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô:

**‡∏ó‡∏£‡∏¥‡∏õ 4W-001** (‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W):
- MH64 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- MI65 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- 9100002556 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- 9100002769 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- 11005050 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- G031 (‡∏à‡∏≥‡∏Å‡∏±‡∏î 4W)
- ‡∏£‡∏ñ: **4W** (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î)

**‡∏ó‡∏£‡∏¥‡∏õ JB-001** (‡∏™‡∏≤‡∏Ç‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î):
- N669 (‡πÉ‡∏´‡∏°‡πà)
- 11005383 (‡πÉ‡∏´‡∏°‡πà)
- 11005361 (‡πÉ‡∏´‡∏°‡πà)
- 11005947 (‡πÉ‡∏´‡∏°‡πà)
- 11004255 (‡πÉ‡∏´‡∏°‡πà)
- NY39 (‡πÉ‡∏´‡∏°‡πà)
- GP00 (‡πÉ‡∏´‡∏°‡πà)
- ‡∏£‡∏ñ: **JB** (‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ, ‡∏•‡∏î 6W ‚Üí JB)

---

## ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

1. ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
2. ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
3. ‚úÖ Phase 2 ‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î
4. ‚úÖ Logic ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏±‡∏ö‡∏ó‡∏£‡∏¥‡∏õ‡πÉ‡∏´‡∏ç‡πà

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô üöÄ**
