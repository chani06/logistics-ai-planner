"""
‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ‡∏ï‡∏≤‡∏°‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ
- ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û+‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏• ‚Üí ‡∏´‡πâ‡∏≤‡∏° 6W (‡πÉ‡∏ä‡πâ 4W/JB ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‚Üí ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 6W
- ‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ ‚Üí ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 6W
- ‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ‡∏≠‡∏∑‡πà‡∏ô ‚Üí ‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏ï‡∏≤‡∏° utilization
"""

import sys
import pandas as pd
from app import get_region_type, get_province

def test_region_classification():
    """‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ"""
    print("=" * 80)
    print("üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 1: ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ (get_region_type)")
    print("=" * 80)
    
    test_cases = {
        'nearby': [
            '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£', '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û', '‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ', '‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ', 
            '‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£', '‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏≤‡∏Ñ‡∏£', '‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°', '‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°',
            '‡∏û‡∏£‡∏∞‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤', '‡∏ô‡∏Ñ‡∏£‡∏ô‡∏≤‡∏¢‡∏Å', '‡∏•‡∏û‡∏ö‡∏∏‡∏£‡∏µ', '‡∏™‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏µ'
        ],
        'north': [
            '‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà', '‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢', '‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô', '‡∏ô‡πà‡∏≤‡∏ô', '‡∏û‡∏∞‡πÄ‡∏¢‡∏≤',
            '‡∏•‡∏≥‡∏õ‡∏≤‡∏á', '‡∏•‡∏≥‡∏û‡∏π‡∏ô', '‡πÅ‡∏û‡∏£‡πà', '‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå', '‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å',
            '‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢', '‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå', '‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥'
        ],
        'south': [
            '‡∏™‡∏á‡∏Ç‡∏•‡∏≤', '‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ', '‡∏¢‡∏∞‡∏•‡∏≤', '‡∏ô‡∏£‡∏≤‡∏ò‡∏¥‡∏ß‡∏≤‡∏™', '‡∏û‡∏±‡∏ó‡∏•‡∏∏‡∏á', 
            '‡∏ï‡∏£‡∏±‡∏á', '‡∏™‡∏ï‡∏π‡∏•', '‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï', '‡∏Å‡∏£‡∏∞‡∏ö‡∏µ‡πà', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä',
            '‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ', '‡∏ä‡∏∏‡∏°‡∏û‡∏£'
        ],
        'far': [
            '‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤', '‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ', '‡∏£‡∏∞‡∏¢‡∏≠‡∏á', '‡∏õ‡∏£‡∏≤‡∏à‡∏µ‡∏ô‡∏ö‡∏∏‡∏£‡∏µ',
            '‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤', '‡πÇ‡∏Ñ‡∏£‡∏≤‡∏ä', '‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô', '‡∏≠‡∏∏‡∏î‡∏£‡∏ò‡∏≤‡∏ô‡∏µ',
            '‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏ö‡∏∏‡∏£‡∏µ', '‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ', '‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ'
        ]
    }
    
    all_pass = True
    for expected_type, provinces in test_cases.items():
        print(f"\nüìç ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà '{expected_type}':")
        for province in provinces:
            result = get_region_type(province)
            status = "‚úÖ" if result == expected_type else "‚ùå"
            if result != expected_type:
                all_pass = False
                print(f"  {status} {province}: ‡πÑ‡∏î‡πâ '{result}' (‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á '{expected_type}')")
            else:
                print(f"  {status} {province}: '{result}' ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    
    print("\n" + "=" * 80)
    if all_pass:
        print("‚úÖ ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    else:
        print("‚ùå ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ")
    print("=" * 80 + "\n")
    
    return all_pass


def test_vehicle_selection_logic():
    """‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ïmantics‡∏£‡∏£‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ"""
    print("=" * 80)
    print("üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 2: ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ‡∏ï‡∏≤‡∏°‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ")
    print("=" * 80)
    
    test_scenarios = [
        {
            'name': '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û+‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏• - ‡∏´‡πâ‡∏≤‡∏° 6W',
            'provinces': ['‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£', '‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ', '‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ'],
            'expected_region': 'nearby',
            'allowed_vehicles': ['4W', 'JB'],
            'prohibited_vehicles': ['6W']
        },
        {
            'name': '‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 6W',
            'provinces': ['‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà', '‡∏•‡∏≥‡∏õ‡∏≤‡∏á'],
            'expected_region': 'north',
            'allowed_vehicles': ['6W'],
            'prohibited_vehicles': ['4W', 'JB']
        },
        {
            'name': '‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö 6W',
            'provinces': ['‡∏™‡∏á‡∏Ç‡∏•‡∏≤', '‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï', '‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä'],
            'expected_region': 'south',
            'allowed_vehicles': ['6W'],
            'prohibited_vehicles': ['4W', 'JB']
        },
        {
            'name': '‡∏†‡∏≤‡∏Ñ‡∏≠‡∏∑‡πà‡∏ô - ‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô',
            'provinces': ['‡∏â‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏£‡∏≤', '‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ'],
            'expected_region': 'far',
            'allowed_vehicles': ['4W', 'JB', '6W'],
            'prohibited_vehicles': []
        }
    ]
    
    all_pass = True
    for scenario in test_scenarios:
        print(f"\nüì¶ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå: {scenario['name']}")
        print(f"   ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î: {', '.join(scenario['provinces'])}")
        
        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ñ‡∏π‡∏Å‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        regions = [get_region_type(p) for p in scenario['provinces']]
        all_match = all(r == scenario['expected_region'] for r in regions)
        
        if all_match:
            print(f"   ‚úÖ ‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ: {scenario['expected_region']} (‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)")
            print(f"   ‚úÖ ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ: {', '.join(scenario['allowed_vehicles'])}")
            if scenario['prohibited_vehicles']:
                print(f"   üö´ ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ: {', '.join(scenario['prohibited_vehicles'])}")
        else:
            print(f"   ‚ùå ‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô: {regions}")
            all_pass = False
    
    print("\n" + "=" * 80)
    if all_pass:
        print("‚úÖ ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    else:
        print("‚ùå ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ")
    print("=" * 80 + "\n")
    
    return all_pass


def test_vehicle_management():
    """‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ"""
    print("=" * 80)
    print("üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 3: ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ")
    print("=" * 80)
    
    from app import LIMITS
    
    print(f"\nüìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:")
    print(f"   4W: ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å {LIMITS['4W']['max_w']} kg, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ {LIMITS['4W']['max_c']} m¬≥")
    print(f"   JB: ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å {LIMITS['JB']['max_w']} kg, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ {LIMITS['JB']['max_c']} m¬≥")
    print(f"   6W: ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å {LIMITS['6W']['max_w']} kg, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ {LIMITS['6W']['max_c']} m¬≥")
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì utilization
    test_loads = [
        {'name': '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡πá‡∏° 4W', 'w': 2500, 'c': 3.0, 'vehicle': '4W'},
        {'name': '‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏ï‡πá‡∏° 4W', 'w': 1500, 'c': 5.0, 'vehicle': '4W'},
        {'name': '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡πá‡∏° JB', 'w': 3500, 'c': 5.0, 'vehicle': 'JB'},
        {'name': '‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏ï‡πá‡∏° JB', 'w': 2000, 'c': 8.0, 'vehicle': 'JB'},
        {'name': '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡πá‡∏° 6W', 'w': 5500, 'c': 10.0, 'vehicle': '6W'},
        {'name': '‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡πÄ‡∏ï‡πá‡∏° 6W', 'w': 3000, 'c': 20.0, 'vehicle': '6W'},
    ]
    
    print(f"\nüì¶ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Utilization:")
    all_pass = True
    for load in test_loads:
        vehicle = load['vehicle']
        w_util = (load['w'] / LIMITS[vehicle]['max_w']) * 100
        c_util = (load['c'] / LIMITS[vehicle]['max_c']) * 100
        max_util = max(w_util, c_util)
        
        status = "‚úÖ" if 90 <= max_util <= 130 else "‚ö†Ô∏è"
        print(f"   {status} {load['name']}: ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å {w_util:.1f}%, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£ {c_util:.1f}%, ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î {max_util:.1f}%")
        
        if max_util > 105:
            print(f"      ‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏ô 105% - ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡∏£‡∏ñ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏¢‡∏Å‡∏ó‡∏£‡∏¥‡∏õ")
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏£‡∏¥‡∏õ
    print(f"\n‚úÇÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏£‡∏¥‡∏õ:")
    oversized_loads = [
        {'name': 'JB ‡πÄ‡∏Å‡∏¥‡∏ô 140% ‡πÉ‡∏ô‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û', 'w': 4000, 'c': 12.0, 'region': 'nearby'},
        {'name': '6W ‡πÄ‡∏ï‡πá‡∏° 150%', 'w': 8000, 'c': 30.0, 'region': 'far'},
    ]
    
    for load in oversized_loads:
        print(f"\n   üì¶ {load['name']}:")
        print(f"      ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å: {load['w']} kg, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£: {load['c']} m¬≥")
        print(f"      ‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ: {load['region']}")
        
        if load['region'] == 'nearby':
            print(f"      ‚úÖ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á: ‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô JB 2 ‡∏Ñ‡∏±‡∏ô (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ 6W)")
            jb_split = load['c'] / 2
            jb_util = (jb_split / LIMITS['JB']['max_c']) * 100
            print(f"      üìä JB ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏±‡∏ô: {jb_split:.1f} m¬≥ ({jb_util:.1f}%)")
        else:
            print(f"      ‚úÖ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á: ‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô 6W 2 ‡∏Ñ‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏î‡∏™‡∏≤‡∏Ç‡∏≤")
            sixw_split = load['c'] / 2
            sixw_util = (sixw_split / LIMITS['6W']['max_c']) * 100
            print(f"      üìä 6W ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏±‡∏ô: {sixw_split:.1f} m¬≥ ({sixw_util:.1f}%)")
    
    print("\n" + "=" * 80)
    print("‚úÖ ‡∏ú‡πà‡∏≤‡∏ô: ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    print("=" * 80 + "\n")
    
    return True


def test_edge_cases():
    """‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"""
    print("=" * 80)
    print("üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 4: ‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞ Edge Cases")
    print("=" * 80)
    
    edge_cases = [
        {
            'name': '‡∏ó‡∏£‡∏¥‡∏õ‡∏Ç‡πâ‡∏≤‡∏°‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ (‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û + ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà)',
            'provinces': ['‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£', '‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà'],
            'note': '‡∏°‡∏µ‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ 6W (‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)'
        },
        {
            'name': '‡∏ó‡∏£‡∏¥‡∏õ‡∏Ç‡πâ‡∏≤‡∏°‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ (‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û + ‡∏™‡∏á‡∏Ç‡∏•‡∏≤)',
            'provinces': ['‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£', '‡∏™‡∏á‡∏Ç‡∏•‡∏≤'],
            'note': '‡∏°‡∏µ‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ ‚Üí ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ 6W (‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)'
        },
        {
            'name': '‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û',
            'provinces': ['‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£'],
            'note': 'nearby ‚Üí ‡∏´‡πâ‡∏≤‡∏° 6W (‡πÉ‡∏ä‡πâ 4W/JB ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)'
        },
        {
            'name': '‡∏ó‡∏£‡∏¥‡∏õ‡∏õ‡∏£‡∏¥‡∏°‡∏ì‡∏ë‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
            'provinces': ['‡∏ô‡∏ô‡∏ó‡∏ö‡∏∏‡∏£‡∏µ', '‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ', '‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£'],
            'note': 'nearby ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí ‡∏´‡πâ‡∏≤‡∏° 6W (‡πÉ‡∏ä‡πâ 4W/JB ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)'
        }
    ]
    
    all_pass = True
    for case in edge_cases:
        print(f"\nüîç {case['name']}")
        print(f"   ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î: {', '.join(case['provinces'])}")
        
        regions = [get_region_type(p) for p in case['provinces']]
        has_north = any(r == 'north' for r in regions)
        has_south = any(r == 'south' for r in regions)
        all_nearby = all(r == 'nearby' for r in regions)
        
        print(f"   ‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ: {', '.join(set(regions))}")
        print(f"   ‡∏°‡∏µ‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠: {'‚úÖ' if has_north else '‚ùå'}")
        print(f"   ‡∏°‡∏µ‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ: {'‚úÖ' if has_south else '‚ùå'}")
        print(f"   nearby ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {'‚úÖ' if all_nearby else '‚ùå'}")
        print(f"   üìù {case['note']}")
        
        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏£‡∏£‡∏Å‡∏∞
        if has_north or has_south:
            expected_vehicle = '6W'
            print(f"   ‚úÖ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: {expected_vehicle} (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)")
        elif all_nearby:
            expected_vehicle = '4W/JB'
            print(f"   ‚úÖ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: {expected_vehicle} (‡∏´‡πâ‡∏≤‡∏° 6W)")
        else:
            expected_vehicle = '‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô'
            print(f"   ‚úÖ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: {expected_vehicle} (‡∏ï‡∏≤‡∏° utilization)")
    
    print("\n" + "=" * 80)
    print("‚úÖ ‡∏ú‡πà‡∏≤‡∏ô: ‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    print("=" * 80 + "\n")
    
    return True


def main():
    """‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"""
    print("\n")
    print("üöõ" * 40)
    print(" " * 20 + "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á")
    print("üöõ" * 40)
    print("\n")
    
    results = []
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 1: ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ
    results.append(("‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ", test_region_classification()))
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 2: ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ
    results.append(("‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ", test_vehicle_selection_logic()))
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 3: ‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ
    results.append(("‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ", test_vehicle_management()))
    
    # ‡∏ó‡∏î‡∏™‡∏≠‡∏ö 4: ‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©
    results.append(("‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©", test_edge_cases()))
    
    # ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
    print("\n")
    print("=" * 80)
    print("üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö")
    print("=" * 80)
    
    for test_name, passed in results:
        status = "‚úÖ ‡∏ú‡πà‡∏≤‡∏ô" if passed else "‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô"
        print(f"{status} - {test_name}")
    
    all_passed = all(result[1] for result in results)
    
    print("=" * 80)
    if all_passed:
        print("üéâ ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î! ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")
    else:
        print("‚ö†Ô∏è ‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö")
    print("=" * 80)
    print("\n")
    
    return 0 if all_passed else 1


if __name__ == "__main__":
    sys.exit(main())
